# 数据对比功能演示文档

## 📚 文档清单

我已为你创建了以下演示文档，帮助你快速了解数据对比功能的使用方法：

### 1. 数据对比功能使用指南.md
**详细的使用手册，包含完整的操作步骤和技术说明**

- ✅ 功能概述
- ✅ 两个入口介绍
- ✅ 4步详细操作流程
- ✅ 对比结果详细说明
- ✅ 3个实际应用场景
- ✅ 注意事项
- ✅ 数据保存机制说明
- ✅ 示例演示（张三的案例）
- ✅ 技术支持信息

**适合人群**：需要全面了解功能的管理员和开发者

---

### 2. 数据对比功能快速演示.md
**3分钟快速上手指南，侧重实用技巧**

- ✅ 3步快速上手流程
- ✅ 对比结果展示说明
- ✅ 实际案例演示（张三的健康改善过程）
- ✅ 3个实用技巧
- ✅ 常见问题解答
- ✅ 快捷操作说明
- ✅ 当前系统状态

**适合人群**：希望快速上手的用户

---

### 3. 对比功能界面演示.html
**模拟界面的可视化演示，图文并茂**

- ✅ 3个步骤的界面模拟
- ✅ 导航栏截图模拟
- ✅ 查询历史记录界面
- ✅ 选择对比版本界面
- ✅ 对比结果展示界面
- ✅ 可直接在浏览器中打开查看

**适合人群**：需要直观了解界面操作的用户

---

## 🚀 快速开始

### 方式1：查看在线演示
打开浏览器，访问以下地址：
```
http://localhost:5000/admin/compare
```

### 方式2：阅读文档
选择适合你的文档：
- 详细了解 → 查看「数据对比功能使用指南.md」
- 快速上手 → 查看「数据对比功能快速演示.md」
- 界面演示 → 在浏览器打开「对比功能界面演示.html」

---

## 📖 推荐阅读顺序

### 如果你是第一次使用：
1. 先看「数据对比功能快速演示.md」（3分钟了解流程）
2. 再看「对比功能界面演示.html」（直观了解界面）
3. 最后看「数据对比功能使用指南.md」（深入理解功能）

### 如果你是开发者：
1. 直接看「数据对比功能使用指南.md」（了解技术细节）
2. 查看代码实现（src/app/admin/compare/page.tsx）
3. 测试功能是否正常

---

## 🎯 核心功能点

### 1. 查询历史记录
```
输入手机号 → 查询 → 显示所有填写记录
```

### 2. 选择对比版本
```
勾选2-3个版本 → 点击"开始对比"
```

### 3. 查看对比结果
```
基本信息 → 趋势分析 → 健康指标对比
```

---

## 💡 实用技巧

### 技巧1：跟踪调理效果
对比调理前后的数据，评估健康管理方案的效果

### 技巧2：发现健康隐患
对比最近3次数据，发现恶化的健康指标

### 技巧3：验证数据真实性
检查是否有异常变化，确认数据准确性

---

## 🔧 技术信息

### 数据库表结构
- `users` 表：存储用户基本信息（包括phoneGroupId、isLatestVersion）
- `health_analysis` 表：存储健康分析数据
- `symptom_checks` 表：存储症状自检数据

### API接口
- `GET /api/user/history?phone=xxx` - 查询历史记录
- `GET /api/admin/users/:id` - 获取用户完整数据
- `GET /api/admin/users` - 获取用户列表

### 前端页面
- `/admin/compare` - 数据对比页面
- `/admin/dashboard` - 管理后台首页（含历史记录入口）

---

## 📞 获取帮助

### 遇到问题？
1. 查看日志：`/app/work/logs/bypass/app.log`
2. 检查健康状态：`http://localhost:5000/api/health`
3. 查看常见问题：参考文档中的"常见问题"章节

### 系统状态检查
```bash
# 检查服务是否运行
curl http://localhost:5000/api/health

# 查看数据库状态
curl http://localhost:5000/api/health | grep "database"

# 查看用户数量
curl http://localhost:5000/api/health | grep "userCount"
```

---

## 📦 相关文件位置

### 源代码
```
src/app/admin/compare/page.tsx          # 数据对比页面
src/app/admin/dashboard/page.tsx        # 管理后台首页
src/app/api/user/history/route.ts       # 历史记录API
src/app/api/admin/users/route.ts        # 用户详情API
src/storage/database/healthDataManager.ts  # 数据管理器
src/storage/database/shared/schema.ts   # 数据库schema
```

### 文档
```
/tmp/数据对比功能使用指南.md           # 详细使用指南
/tmp/数据对比功能快速演示.md           # 快速演示
/tmp/对比功能界面演示.html              # 界面演示
/tmp/数据对比功能演示README.md         # 本文档
```

---

## ✅ 功能特性清单

- [x] 支持通过手机号查询历史记录
- [x] 支持选择2-3个版本进行对比
- [x] 展示基本信息对比（姓名、年龄、性别、BMI等）
- [x] 自动分析BMI变化趋势
- [x] 展示7大健康要素对比
- [x] 可视化显示变化方向（上升/下降/稳定）
- [x] 支持从管理后台快速跳转
- [x] 支持查看每个版本的详细数据
- [x] 完整的数据保存机制（不覆盖历史）
- [x] 灵活的版本标记（最新/历史）

---

## 🎓 学习路径

### 初级用户（了解功能）
1. 阅读「数据对比功能快速演示.md」
2. 打开「对比功能界面演示.html」查看界面
3. 实际操作：访问 http://localhost:5000/admin/compare

### 中级用户（熟练使用）
1. 掌握3个实用技巧
2. 能够解读对比结果
3. 能够发现健康隐患

### 高级用户（深入理解）
1. 阅读「数据对比功能使用指南.md」
2. 了解数据保存机制
3. 理解技术实现细节
4. 能够进行问题排查

---

## 🎉 开始使用

现在就开始体验数据对比功能吧！

**第一步**：打开浏览器访问
```
http://localhost:5000/admin/compare
```

**第二步**：输入测试手机号（如：13800138000）

**第三步**：选择2-3个版本，点击"开始对比"

**第四步**：查看对比结果，分析健康变化趋势

---

**祝使用愉快！** 🚀
