# 功能更新通知 - 姓名查询功能

## 📢 更新说明

数据对比功能已新增**姓名查询**支持！现在你可以通过两种方式查询用户历史记录：

### ✅ 新增功能

1. **按手机号查询**（原有功能）
   - 输入手机号查询用户历史记录
   - 适用于已知手机号的场景

2. **按姓名查询**（新增功能）
   - 输入姓名查询用户历史记录
   - 适用于忘记手机号或快速查找的场景

## 🎯 快速使用

### 方式1：按手机号查询
```
1. 访问：http://localhost:5000/admin/compare
2. 点击「按手机号查询」按钮
3. 输入手机号（如：13800138000）
4. 点击「查询历史」
```

### 方式2：按姓名查询（新增）
```
1. 访问：http://localhost:5000/admin/compare
2. 点击「按姓名查询」按钮
3. 输入姓名（如：张三）
4. 点击「查询历史」
```

## 💡 界面预览

```
┌─────────────────────────────────────────────┐
│  选择对比对象                               │
│  输入手机号或姓名查询该用户的所有填写记录   │
├─────────────────────────────────────────────┤
│  [按手机号查询] [按姓名查询]               │  ← 新增查询类型选择
│                                              │
│  ┌──────────────────────────────────────┐  │
│  │ 请输入手机号 / 请输入姓名           │  │  ← 动态提示
│  └──────────────────────────────────────┘  │
│                                              │
│  [查询历史]                                 │
└─────────────────────────────────────────────┘
```

## ⚡ 快捷操作

- **切换查询类型**：点击按钮快速切换
- **Enter 键查询**：输入完成后按 Enter 快速查询
- **清空输入**：切换查询类型时自动清空输入框

## 📝 技术细节

### 后端修改
1. **新增方法**：`healthDataManager.getUsersByName(name)`
2. **API 更新**：`GET /api/user/history?name=xxx`
3. 支持同时使用 `phone`、`name`、`phoneGroupId` 参数

### 前端修改
1. **状态管理**：新增 `queryType` 和 `name` 状态
2. **UI 更新**：添加查询类型切换按钮
3. **交互优化**：支持 Enter 键快捷查询

## ⚠️ 注意事项

1. **精确匹配**：姓名查询是精确匹配，需输入完整姓名
2. **同名用户**：如果多个用户同名，会显示所有记录
3. **优先建议**：推荐使用手机号查询，结果更准确

## 🎉 使用场景

### 场景1：忘记手机号
```
管理员记得用户姓名但忘记手机号
→ 使用姓名查询功能快速查找
```

### 场景2：快速查找
```
需要快速查看某用户的健康数据
→ 直接输入姓名查询，比查找手机号更快捷
```

### 场景3：批量管理
```
查看某地区同名用户的健康数据
→ 使用姓名查询快速找到所有相关记录
```

## 📊 查询结果

无论使用哪种查询方式，查询结果都包含：

| 信息 | 说明 |
|------|------|
| 填写次数 | 第N次填写 |
| 填写时间 | 数据填写的时间 |
| 姓名 | 用户姓名 |
| 年龄 | 用户年龄 |
| 性别 | 用户性别 |
| BMI | 身体质量指数 |
| 状态 | 最新/历史 |

## 🔍 测试建议

### 测试用例
1. ✅ 按姓名查询已知用户
2. ✅ 按手机号查询已知用户
3. ✅ 查询不存在的用户
4. ✅ 快速切换查询类型
5. ✅ 使用 Enter 键快捷查询

## 📚 相关文档

- [详细功能说明](./姓名查询功能说明.md)
- [数据对比功能使用指南](./数据对比功能使用指南.md)

---

**更新时间**：2024年
**功能版本**：v2.0
**新增内容**：姓名查询支持
