# Coze 平台部署指南 - 家庭网络访问

## 🌐 访问地址

**后台登录页面：**
```
https://cd776816-213e-4c84-af60-dbe5b397d82e.dev.coze.site/admin/login
```

**后台管理页面：**
```
https://cd776816-213e-4c84-af60-dbe5b397d82e.dev.coze.site/admin/dashboard
```

**健康自检首页：**
```
https://cd776816-213e-4c84-af60-dbe5b397d82e.dev.coze.site/
```

---

## 📝 部署步骤

### 方法 1：通过 Coze 平台部署（推荐）

#### 1. 登录 Coze 平台
1. 打开浏览器，访问：https://www.coze.com/
2. 登录你的账号

#### 2. 进入项目管理
1. 在 Coze 平台中找到你的健康自检系统项目
2. 进入项目详情页面

#### 3. 检查项目配置
1. 确认项目已配置为 Next.js 项目
2. 确认环境变量已正确设置（特别是数据库连接）
3. 确认 .coze 配置文件正确

#### 4. 触发部署
1. 在项目详情页面，找到"部署"或"构建"选项
2. 点击"重新部署"或"触发构建"按钮
3. 等待构建完成（通常需要 2-5 分钟）

#### 5. 访问预览环境
构建完成后，直接访问：
```
https://cd776816-213e-4c84-af60-dbe5b397d82e.dev.coze.site/admin/login
```

---

### 方法 2：通过 Git 推送触发自动部署

如果你的 Coze 项目配置了 Git 集成，可以通过 Git 推送触发自动部署：

#### 1. 提交代码
```bash
# 添加所有修改
git add .

# 提交代码
git commit -m "chore: 恢复后台功能到1月28日版本（a50d9f3）"

# 推送到远程仓库
git push origin main
```

#### 2. 等待自动部署
- Coze 平台会自动检测到新的提交
- 触发自动构建和部署
- 等待部署完成

#### 3. 访问预览环境
```
https://cd776816-213e-4c84-af60-dbe5b397d82e.dev.coze.site/admin/login
```

---

## 🏠 家庭网络访问说明

### ✅ 可以直接访问
**Coze 平台的预览环境是公网可访问的，你可以在任何网络中访问，包括：**
- ✅ 家庭网络
- ✅ 公司网络
- ✅ 移动网络（4G/5G）
- ✅ 公共 Wi-Fi

### 📱 访问方式
你可以在以下设备上访问：
1. **电脑浏览器**
   - Chrome
   - Firefox
   - Safari
   - Edge

2. **手机浏览器**
   - iOS Safari
   - Android Chrome
   - 微信内置浏览器

3. **平板电脑**
   - iPad
   - Android 平板

---

## 🔐 登录步骤

### 1. 访问登录页面
在浏览器中打开：
```
https://cd776816-213e-4c84-af60-dbe5b397d82e.dev.coze.site/admin/login
```

### 2. 输入管理员账号
如果数据库中已有管理员账号，输入：
- 用户名：`admin`
- 密码：`admin123`

**注意：** 如果登录失败，可能是因为：
- 数据库中没有管理员账号
- 管理员密码不是 `admin123`

### 3. 登录成功
登录成功后会自动跳转到：
```
https://cd776816-213e-4c84-af60-dbe5b397d82e.dev.coze.site/admin/dashboard
```

---

## 🧪 功能测试清单

部署完成后，请测试以下功能：

### 1. 登录功能
- [ ] 访问登录页面
- [ ] 输入用户名和密码
- [ ] 成功登录并跳转到 Dashboard

### 2. Dashboard 页面
- [ ] 页面正常显示
- [ ] 用户列表正常加载
- [ ] 搜索功能正常工作
- [ ] 分页功能正常工作

### 3. 用户详情
- [ ] 点击"查看详情"按钮
- [ ] 用户详情对话框正常打开
- [ ] 健康数据正常显示
- [ ] 健康要素分析正常显示

### 4. 历史记录查询
- [ ] 输入手机号查询历史记录
- [ ] 历史记录正常显示

---

## ⚠️ 常见问题

### 问题 1：页面无法访问

**症状：** 访问 URL 时显示"无法访问"或"404 Not Found"

**解决方法：**
1. 检查 Coze 平台部署是否完成
2. 等待 1-2 分钟，让 DNS 解析生效
3. 清除浏览器缓存
4. 尝试使用无痕模式访问

### 问题 2：登录失败

**症状：** 输入正确的用户名和密码后仍显示"用户名或密码错误"

**解决方法：**
1. 检查数据库中是否有管理员账号
2. 确认管理员用户名和密码
3. 如果没有管理员账号，需要创建一个

### 问题 3：页面显示异常

**症状：** 页面样式错乱或功能不正常

**解决方法：**
1. 清除浏览器缓存
2. 使用无痕模式访问
3. 检查浏览器控制台错误信息
4. 确认 Coze 平台部署成功

### 问题 4：数据加载失败

**症状：** 用户列表或其他数据无法加载

**解决方法：**
1. 检查数据库连接配置
2. 确认环境变量是否正确设置
3. 查看 Coze 平台的应用日志

---

## 🔧 环境变量配置

确保 Coze 平台的环境变量已正确设置：

### 必需的环境变量

```env
# 数据库连接
DATABASE_URL=postgresql://username:password@host:port/database

# JWT 密钥（用于登录认证）
JWT_SECRET=your-secret-key

# 管理员账号（可选，可以通过初始化脚本创建）
ADMIN_USERNAME=admin
ADMIN_PASSWORD=admin123
```

### 如何设置环境变量

1. 在 Coze 平台的项目页面
2. 找到"环境变量"或"配置"选项
3. 添加上述环境变量
4. 保存并重新部署

---

## 📊 部署状态检查

### 1. 检查部署状态
在 Coze 平台的项目页面，查看：
- 构建状态（成功/失败）
- 部署状态（成功/失败）
- 构建日志（如果有错误）

### 2. 检查服务器日志
如果 Coze 平台支持查看日志，检查：
- 应用日志
- 错误日志
- 访问日志

---

## 🔄 持续部署

### 自动部署流程
1. 修改代码
2. 提交到 Git 仓库
3. 推送到远程仓库
4. Coze 平台自动检测到新的提交
5. 自动触发构建和部署
6. 部署完成后自动更新预览环境

### 手动部署流程
1. 修改代码
2. 在 Coze 平台点击"重新部署"
3. 等待构建完成
4. 访问预览环境

---

## 📞 技术支持

如果遇到问题，请检查：

1. **浏览器控制台**
   - 按 F12 打开开发者工具
   - 查看 Console 标签页的错误信息

2. **网络请求**
   - 按 F12 打开开发者工具
   - 查看 Network 标签页
   - 检查 API 请求是否成功

3. **Coze 平台日志**
   - 在 Coze 平台的项目页面
   - 查看构建日志和应用日志

---

## 🎉 完成

**恭喜！** 你现在可以在家庭网络中访问 Coze 平台的预览环境了！

**直接访问：**
```
https://cd776816-213e-4c84-af60-dbe5b397d82e.dev.coze.site/admin/login
```

---

**祝你使用愉快！** 🚀
